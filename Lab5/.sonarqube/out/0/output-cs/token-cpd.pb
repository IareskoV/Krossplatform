å
*E:\Labs\CrossPlatform\Lab5\Lab5\AppUser.cs
	namespace 	
Lab5
 
{ 
public		 

class		 
AppUser		 
:		 
IdentityUser		 '
{

 
public 
string 
FullName 
{  
get! $
;$ %
set& )
;) *
}+ ,
} 
} €
7E:\Labs\CrossPlatform\Lab5\Lab5\AppUserConfiguration.cs
	namespace 	
Lab5
 
{		 
public

 

class

  
AppUserConfiguration

 %
:

& '$
IEntityTypeConfiguration

( @
<

@ A
AppUser

A H
>

H I
{ 
public 
void 
	Configure 
( 
EntityTypeBuilder /
</ 0
AppUser0 7
>7 8
builder9 @
)@ A
{ 	
builder 
. 
HasKey 
( 
x 
=> 
x  !
.! "
Id" $
)$ %
;% &
} 	
} 
} Ÿ
0E:\Labs\CrossPlatform\Lab5\Lab5\AuthDbContext.cs
	namespace

 	
Lab5


 
{ 
public 

class 
AuthDbContext 
:  
IdentityDbContext! 2
<2 3
AppUser3 :
>: ;
{ 
public 
AuthDbContext 
( 
DbContextOptions -
<- .
AuthDbContext. ;
>; <
options= D
)D E
:F G
baseH L
(L M
optionsM T
)T U
{ 	
} 	
	protected 
override 
void 
OnModelCreating  /
(/ 0
ModelBuilder0 <
builder= D
)D E
{ 	
base 
. 
OnModelCreating  
(  !
builder! (
)( )
;) *
builder 
. 
Entity 
< 
AppUser "
>" #
(# $
entity$ *
=>+ -
entity. 4
.4 5
ToTable5 <
(< =
name= A
:A B
$strC J
)J K
)K L
;L M
builder 
. 
Entity 
< 
IdentityRole '
>' (
(( )
entity) /
=>0 2
entity3 9
.9 :
ToTable: A
(A B
nameB F
:F G
$strH O
)O P
)P Q
;Q R
builder 
. 
Entity 
< 
IdentityUserRole +
<+ ,
string, 2
>2 3
>3 4
(4 5
entity5 ;
=>< >
entity? E
.E F
ToTableF M
(M N
nameN R
:R S
$strT _
)_ `
)` a
;a b
builder 
. 
Entity 
< 
IdentityUserClaim ,
<, -
string- 3
>3 4
>4 5
(5 6
entity6 <
=>= ?
entity@ F
.F G
ToTableG N
(N O
nameO S
:S T
$strU `
)` a
)a b
;b c
builder 
. 
Entity 
< 
IdentityUserLogin ,
<, -
string- 3
>3 4
>4 5
(5 6
entity6 <
=>= ?
entity@ F
.F G
ToTableG N
(N O
nameO S
:S T
$strU b
)b c
)c d
;d e
builder 
. 
Entity 
< 
IdentityRoleClaim ,
<, -
string- 3
>3 4
>4 5
(5 6
entity6 <
=>= ?
entity@ F
.F G
ToTableG N
(N O
$strO [
)[ \
)\ ]
;] ^
builder 
. 
ApplyConfiguration &
(& '
new' * 
AppUserConfiguration+ ?
(? @
)@ A
)A B
;B C
} 	
} 
} ùC
=E:\Labs\CrossPlatform\Lab5\Lab5\Controllers\AuthController.cs
	namespace 	
Lab5
 
. 
Controllers 
{ 
public 

class 
AuthController 
:  !

Controller" ,
{ 
private 
readonly 
SignInManager &
<& '
AppUser' .
>. /
_signInManager0 >
;> ?
private 
readonly 
UserManager $
<$ %
AppUser% ,
>, -
_userManager. :
;: ;
private 
readonly -
!IIdentityServerInteractionService :
_interactionService; N
;N O
public 
AuthController 
( 
SignInManager +
<+ ,
AppUser, 3
>3 4
signInManager5 B
,B C
UserManagerD O
<O P
AppUserP W
>W X
userManagerY d
,d e.
!IIdentityServerInteractionService	f á 
interactionService
à ö
)
ö õ
{ 	
_signInManager 
= 
signInManager *
;* +
_userManager 
= 
userManager &
;& '
_interactionService 
=  !
interactionService" 4
;4 5
} 	
[ 	
HttpGet	 
] 
public 
IActionResult 
Login "
(" #
string# )
	returnUrl* 3
)3 4
{ 	
var 
	viewModel 
= 
new 
LoginViewModel -
{ 
	ReturnUrl 
= 
	returnUrl $
} 
; 
return   
View   
(   
	viewModel    
)    !
;  ! "
}!! 	
["" 	
HttpPost""	 
]"" 
public## 
async## 
Task## 
<## 
IActionResult## '
>##' (
Login##) .
(##. /
LoginViewModel##/ =
	viewModel##> G
)##G H
{$$ 	
if%% 
(%% 
!%% 

ModelState%% 
.%% 
IsValid%% #
)%%# $
{&& 
return'' 
View'' 
('' 
	viewModel'' %
)''% &
;''& '
}(( 
var** 
user** 
=** 
await** 
_userManager** )
.**) *
FindByNameAsync*** 9
(**9 :
	viewModel**: C
.**C D
UserName**D L
)**L M
;**M N
if++ 
(++ 
user++ 
==++ 
null++ 
)++ 
{,, 

ModelState-- 
.-- 
AddModelError-- (
(--( )
string--) /
.--/ 0
Empty--0 5
,--5 6
$str--7 G
)--G H
;--H I
return.. 
View.. 
(.. 
	viewModel.. %
)..% &
;..& '
}// 
var11 
result11 
=11 
await11 
_signInManager11 -
.11- .
PasswordSignInAsync11. A
(11A B
	viewModel11B K
.11K L
UserName11L T
,11T U
	viewModel11V _
.11_ `
Password11` h
,11h i
false11j o
,11o p
false11q v
)11v w
;11w x
if22 
(22 
result22 
.22 
	Succeeded22  
)22  !
{33 
var44 
claims44 
=44 
new44  
List44! %
<44% &
Claim44& +
>44+ ,
{55 
new66 
Claim66 
(66 
$str66 (
,66( )
user66* .
?66. /
.66/ 0
FullName660 8
)668 9
}77 
;77 
await88 
_signInManager88 $
.88$ %!
SignInWithClaimsAsync88% :
(88: ;
user88; ?
,88? @
false88A F
,88F G
claims88H N
)88N O
;88O P
return99 
Redirect99 
(99  
$str99  4
)994 5
;995 6
}:: 

ModelState;; 
.;; 
AddModelError;; $
(;;$ %
string;;% +
.;;+ ,
Empty;;, 1
,;;1 2
$str;;3 @
);;@ A
;;;A B
return<< 
View<< 
(<< 
	viewModel<< !
)<<! "
;<<" #
}== 	
[?? 	
HttpGet??	 
]?? 
public@@ 
IActionResult@@ 
Register@@ %
(@@% &
string@@& ,
	returnUrl@@- 6
)@@6 7
{AA 	
varBB 
	viewModelBB 
=BB 
newBB 
RegisterViewModelBB  1
{CC 
	ReturnUrlDD 
=DD 
	returnUrlDD %
}EE 
;EE 
returnFF 
ViewFF 
(FF 
	viewModelFF !
)FF! "
;FF" #
}GG 	
[II 	
HttpPostII	 
]II 
publicJJ 
asyncJJ 
TaskJJ 
<JJ 
IActionResultJJ '
>JJ' (
RegisterJJ) 1
(JJ1 2
RegisterViewModelJJ2 C
	viewModelJJD M
)JJM N
{KK 	
ifLL 
(LL 
!LL 

ModelStateLL 
.LL 
IsValidLL #
)LL# $
{MM 
returnNN 
ViewNN 
(NN 
	viewModelNN %
)NN% &
;NN& '
}OO 
varPP 
userPP 
=PP 
newPP 
AppUserPP "
{QQ 
UserNameRR 
=RR 
	viewModelRR $
.RR$ %
UserNameRR% -
,RR- .
PhoneNumberSS 
=SS 
	viewModelSS '
.SS' (
PhoneNumberSS( 3
,SS3 4
EmailTT 
=TT 
	viewModelTT !
.TT! "
EmailTT" '
,TT' (
FullNameUU 
=UU 
	viewModelUU $
.UU$ %
FullNameUU% -
}VV 
;VV 
varWW 
resultWW 
=WW 
awaitWW 
_userManagerWW +
.WW+ ,
CreateAsyncWW, 7
(WW7 8
userWW8 <
,WW< =
	viewModelWW> G
.WWG H
PasswordWWH P
)WWP Q
;WWQ R
ifXX 
(XX 
resultXX 
.XX 
	SucceededXX  
)XX  !
{YY 
varZZ 
claimsZZ 
=ZZ 
newZZ  
ListZZ! %
<ZZ% &
ClaimZZ& +
>ZZ+ ,
{[[ 
new\\ 
Claim\\ 
(\\ 
$str\\ (
,\\( )
user\\* .
?\\. /
.\\/ 0
FullName\\0 8
)\\8 9
}]] 
;]] 
await^^ 
_signInManager^^ $
.^^$ %!
SignInWithClaimsAsync^^% :
(^^: ;
user^^; ?
,^^? @
false^^A F
,^^F G
claims^^H N
)^^N O
;^^O P
return__ 
Redirect__ 
(__  
$str__  4
)__4 5
;__5 6
}`` 

ModelStateaa 
.aa 
AddModelErroraa $
(aa$ %
stringaa% +
.aa+ ,
Emptyaa, 1
,aa1 2
$straa3 C
)aaC D
;aaD E
returnbb 
Viewbb 
(bb 
	viewModelbb !
)bb! "
;bb" #
}cc 	
[ee 	
HttpGetee	 
]ee 
publicff 
asyncff 
Taskff 
<ff 
IActionResultff '
>ff' (
Logoutff) /
(ff/ 0
stringff0 6
logoutIdff7 ?
)ff? @
{gg 	
awaithh 
_signInManagerhh  
.hh  !
SignOutAsynchh! -
(hh- .
)hh. /
;hh/ 0
varii 
logoutRequestii 
=ii 
awaitii  %
_interactionServiceii& 9
.ii9 :!
GetLogoutContextAsyncii: O
(iiO P
logoutIdiiP X
)iiX Y
;iiY Z
returnjj 
Redirectjj 
(jj 
logoutRequestjj )
.jj) *!
PostLogoutRedirectUrijj* ?
)jj? @
;jj@ A
}kk 	
}ll 
}mm ‹7
=E:\Labs\CrossPlatform\Lab5\Lab5\Controllers\HomeController.cs
	namespace 	
Lab5
 
. 
Controllers 
{ 
public 

class 
HomeController 
:  !

Controller" ,
{ 
private 
readonly 
ILogger  
<  !
HomeController! /
>/ 0
_logger1 8
;8 9
public 
HomeController 
( 
ILogger %
<% &
HomeController& 4
>4 5
logger6 <
)< =
{ 	
_logger 
= 
logger 
; 
} 	
public 
IActionResult 
Index "
(" #
)# $
{ 	
return 
View 
( 
) 
; 
} 	
[ 	
	Authorize	 
] 
public 
IActionResult 
Lab  
(  !
int! $
number% +
)+ ,
{   	
ViewData!! 
[!! 
$str!! 
]!! 
=!! 
number!! $
;!!$ %
ILab"" 
lab"" 
;"" 
switch## 
(## 
number## 
)## 
{$$ 
case%% 
$num%% 
:%% 
lab&& 
=&& 
new&& 
Lab1&& "
(&&" #
)&&# $
;&&$ %
break'' 
;'' 
case(( 
$num(( 
:(( 
lab)) 
=)) 
new)) 
Lab2)) "
())" #
)))# $
;))$ %
break** 
;** 
case++ 
$num++ 
:++ 
lab,, 
=,, 
new,, 
Lab3,, "
(,," #
),,# $
;,,$ %
break-- 
;-- 
default.. 
:.. 
return// 
Error//  
(//  !
)//! "
;//" #
}00 
ViewData11 
[11 
$str11 "
]11" #
=11$ %
lab11& )
.11) *
Description11* 5
;115 6
return22 
View22 
(22 
)22 
;22 
}33 	
[55 	
HttpPost55	 
]55 
[66 	
	Authorize66	 
]66 
public77 
IActionResult77 
Lab77  
(77  !
int77! $
number77% +
,77+ ,
string77- 3
input774 9
)779 :
{88 	
ViewData99 
[99 
$str99 
]99 
=99 
number99 $
;99$ %
ILab:: 
lab:: 
;:: 
switch;; 
(;; 
number;; 
);; 
{<< 
case== 
$num== 
:== 
lab>> 
=>> 
new>> 
Lab1>> "
(>>" #
)>># $
;>>$ %
break?? 
;?? 
case@@ 
$num@@ 
:@@ 
labAA 
=AA 
newAA 
Lab2AA "
(AA" #
)AA# $
;AA$ %
breakBB 
;BB 
caseCC 
$numCC 
:CC 
labDD 
=DD 
newDD 
Lab3DD "
(DD" #
)DD# $
;DD$ %
breakEE 
;EE 
defaultFF 
:FF 
returnGG 
ErrorGG  
(GG  !
)GG! "
;GG" #
}HH 
ViewDataII 
[II 
$strII "
]II" #
=II$ %
labII& )
.II) *
DescriptionII* 5
;II5 6
ViewDataJJ 
[JJ 
$strJJ 
]JJ 
=JJ  
labJJ! $
.JJ$ %
ExecuteJJ% ,
(JJ, -
inputJJ- 2
)JJ2 3
;JJ3 4
returnKK 
ViewKK 
(KK 
)KK 
;KK 
}LL 	
[MM 	
	AuthorizeMM	 
]MM 
publicNN 
IActionResultNN 
UserPageNN %
(NN% &
)NN& '
{OO 	
ViewDataPP 
[PP 
$strPP 
]PP  
=PP! "
UserPP# '
.PP' (
ClaimsPP( .
.PP. /
FirstOrDefaultPP/ =
(PP= >
objPP> A
=>PPB D
objPPE H
.PPH I
TypePPI M
.PPM N
EqualsPPN T
(PPT U
JwtClaimTypesPPU b
.PPb c
NamePPc g
)PPg h
)PPh i
?PPi j
.PPj k
ValuePPk p
;PPp q
ViewDataQQ 
[QQ 
$strQQ 
]QQ  
=QQ! "
UserQQ# '
.QQ' (
ClaimsQQ( .
.QQ. /
FirstOrDefaultQQ/ =
(QQ= >
objQQ> A
=>QQB D
objQQE H
.QQH I
TypeQQI M
.QQM N
EqualsQQN T
(QQT U
$strQQU _
)QQ_ `
)QQ` a
?QQa b
.QQb c
ValueQQc h
;QQh i
ViewDataRR 
[RR 
$strRR 
]RR 
=RR 
UserRR  $
.RR$ %
ClaimsRR% +
.RR+ ,
FirstOrDefaultRR, :
(RR: ;
objRR; >
=>RR? A
objRRB E
.RRE F
TypeRRF J
.RRJ K
EqualsRRK Q
(RRQ R
JwtClaimTypesRRR _
.RR_ `
EmailRR` e
)RRe f
)RRf g
?RRg h
.RRh i
ValueRRi n
;RRn o
ViewDataSS 
[SS 
$strSS 
]SS 
=SS 
UserSS  $
.SS$ %
ClaimsSS% +
.SS+ ,
FirstOrDefaultSS, :
(SS: ;
objSS; >
=>SS? A
objSSB E
.SSE F
TypeSSF J
.SSJ K
EqualsSSK Q
(SSQ R
JwtClaimTypesSSR _
.SS_ `
PhoneNumberSS` k
)SSk l
)SSl m
?SSm n
.SSn o
ValueSSo t
;SSt u
returnTT 
ViewTT 
(TT 
)TT 
;TT 
}UU 	
[VV 	
ResponseCacheVV	 
(VV 
DurationVV 
=VV  !
$numVV" #
,VV# $
LocationVV% -
=VV. /!
ResponseCacheLocationVV0 E
.VVE F
NoneVVF J
,VVJ K
NoStoreVVL S
=VVT U
trueVVV Z
)VVZ [
]VV[ \
publicWW 
IActionResultWW 
ErrorWW "
(WW" #
)WW# $
{XX 	
returnYY 
ViewYY 
(YY 
newYY 
ErrorViewModelYY *
{YY+ ,
	RequestIdYY- 6
=YY7 8
ActivityYY9 A
.YYA B
CurrentYYB I
?YYI J
.YYJ K
IdYYK M
??YYN P
HttpContextYYQ \
.YY\ ]
TraceIdentifierYY] l
}YYm n
)YYn o
;YYo p
}ZZ 	
}[[ 
}\\ ¢
0E:\Labs\CrossPlatform\Lab5\Lab5\DbInitializer.cs
	namespace 	
Lab5
 
{ 
public 

class 
DbInitializer 
{		 
public

 
static

 
void

 

Initialize

 %
(

% &
AuthDbContext

& 3
context

4 ;
)

; <
{ 	
context 
. 
Database 
. 
EnsureCreated *
(* +
)+ ,
;, -
} 	
} 
} ¬
2E:\Labs\CrossPlatform\Lab5\Lab5\IdConfiguration.cs
	namespace		 	
Lab5		
 
{

 
public 

class 
IdConfiguration  
{ 
public 
static 
IEnumerable !
<! "
ApiScope" *
>* +
	ApiScopes, 5
=>6 8
new9 <
List= A
<A B
ApiScopeB J
>J K
{ 	
new 
ApiScope 
( 
$str 
, 
$str  )
)) *
} 	
;	 

public 
static 
IEnumerable !
<! "
IdentityResource" 2
>2 3
IdentityResources4 E
=>F H
newI L
ListM Q
<Q R
IdentityResourceR b
>b c
{ 	
new 
IdentityResources !
.! "
OpenId" (
(( )
)) *
,* +
new 
IdentityResources !
.! "
Profile" )
() *
)* +
} 	
;	 

public 
static 
IEnumerable !
<! "
ApiResource" -
>- .
ApiResources/ ;
=>< >
new? B
ListC G
<G H
ApiResourceH S
>S T
{ 	
new 
ApiResource 
( 
$str (
,( )
$str* 7
,7 8
new9 <
[= >
]> ?
{ 
JwtClaimTypes 
. 
Name "
} 
) 
{ 
Scopes 
= 
{ 
$str &
}& '
}   
}!! 	
;!!	 

public## 
static## 
IEnumerable## !
<##! "
Client##" (
>##( )
Clients##* 1
=>##2 4
new##5 8
List##9 =
<##= >
Client##> D
>##D E
{$$ 	
new%% 
Client%% 
{&& 
ClientId'' 
='' 
$str'' (
,''( )

ClientName(( 
=(( 
$str(( )
,(() *
AllowedGrantTypes)) !
=))" #

GrantTypes))$ .
.)). /
Code))/ 3
,))3 4
RequireClientSecret** #
=**$ %
false**& +
,**+ ,
RequirePkce++ 
=++ 
true++ "
,++" #
RedirectUris,, 
=,, 
{-- 
$str.. 
}// 
,// 
AllowedCorsOrigins00 "
=00# $
{11 
$str22 
}33 
,33 "
PostLogoutRedirectUris44 &
=44' (
{55 
$str66 
}77 
,77 
AllowedScopes88 
=88 
{99 #
IdentityServerConstants:: +
.::+ ,
StandardScopes::, :
.::: ;
OpenId::; A
,::A B#
IdentityServerConstants;; +
.;;+ ,
StandardScopes;;, :
.;;: ;
Profile;;; B
,;;B C
$str<<  
}== 
,== '
AllowAccessTokensViaBrowser>> +
=>>, -
true>>. 2
}?? 
}@@ 	
;@@	 

}AA 
}BB á
,E:\Labs\CrossPlatform\Lab5\Lab5\Labs\ILab.cs
	namespace 	
Lab5
 
. 
Labs 
{ 
	interface 
ILab 
{		 
public

 
string

 
Execute

 
(

 
string

 $
input

% *
)

* +
;

+ ,
public 
string 
Description !
{" #
get$ '
;' (
set) ,
;, -
}. /
} 
} ¬
,E:\Labs\CrossPlatform\Lab5\Lab5\Labs\Lab1.cs
	namespace 	
Lab5
 
. 
Labs 
{ 
class 	
Lab1
 
: 
ILab 
{		 
public

 
string

 
Description

 !
{

" #
get

$ '
;

' (
set

) ,
;

, -
}

. /
public 
Lab1 
( 
) 
{ 	
Description 
= 
$str e
+f g
$str q
+r s
$str p
+q r
$str Z
+[ \
$str I
+J K
$str	 õ
;
õ ú
} 	
public 
string 
Execute 
( 
string $
input% *
)* +
{ 	
string 
[ 
] 
arr 
= 
input  
.  !
Split! &
(& '
$char' *
)* +
;+ ,
string 
result 
; 
try 
{ 
int 
n 
= 
int 
. 
Parse !
(! "
arr" %
[% &
$num& '
]' (
)( )
;) *
int 
a 
= 
int 
. 
Parse !
(! "
arr" %
[% &
$num& '
]' (
)( )
;) *
int 
b 
= 
int 
. 
Parse !
(! "
arr" %
[% &
$num& '
]' (
)( )
;) *
result 
= 
( 
Solve 
(  
n  !
+" #
$num$ %
,% &
a' (
)( )
** +
Solve, 1
(1 2
n2 3
+4 5
$num6 7
,7 8
b9 :
): ;
); <
.< =
ToString= E
(E F
)F G
;G H
}   
catch!! 
(!! 
	Exception!! 
e!! 
)!! 
{"" 
return## 
e## 
.## 
Message##  
;##  !
}$$ 
return&& 
result&& 
;&& 
}'' 	
static)) 
int)) 
Solve)) 
()) 
int)) 
n)) 
,)) 
int))  #
m))$ %
)))% &
{** 	
return++ 
	Factorial++ 
(++ 
m++ 
+++  
n++! "
-++# $
$num++% &
)++& '
/++( )
	Factorial++* 3
(++3 4
n++4 5
-++6 7
$num++8 9
)++9 :
;++: ;
},, 	
static.. 
int.. 
	Factorial.. 
(.. 
int..  
x..! "
).." #
{// 	
if00 
(00 
x00 
==00 
$num00 
)00 
{11 
return22 
$num22 
;22 
}33 
else44 
{55 
return66 
x66 
*66 
	Factorial66 $
(66$ %
x66% &
-66' (
$num66) *
)66* +
;66+ ,
}77 
}88 	
}99 
}:: Ø$
,E:\Labs\CrossPlatform\Lab5\Lab5\Labs\Lab2.cs
	namespace 	
Lab5
 
. 
Labs 
{ 
public 

class 
Lab2 
: 
ILab 
{		 
public

 
string

 
Description

 !
{

" #
get

$ '
;

' (
set

) ,
;

, -
}

. /
public 
Lab2 
( 
) 
{ 	
Description 
= 
$str	 ¥
+
µ ∂
$str	 å
+
ç é
$str	 £
+
§ •
$str Z
+[ \
$str	 Ï
;
Ï Ì
} 	
public 
string 
Execute 
( 
string $
input% *
)* +
{ 	
int 
k 
, 
i 
, 
j 
; 
long 
[ 
, 
] 
a 
= 
new 
long  
[  !
$num! #
,# $
$num% &
]& '
;' (
long 
x 
, 
y 
, 
z 
; 
var 
text 
= 
input 
; 
if 
( 
! 
int 
. 
TryParse 
( 
text "
," #
out$ '
k( )
)) *
)* +
{ 
return 
$str 7
;7 8
} 
if   
(   
k   
>=   
$num   
)   
{!! 
return"" 
$str"" :
;"": ;
}## 
a%% 
[%% 
$num%% 
,%% 
$num%% 
]%% 
=%% 
$num%% 
;%% 
while&& 
(&& 
k&& 
>&& 
$num&& 
)&& 
{'' 
k(( 
=(( 
k(( 
-(( 
$num(( 
;(( 
x)) 
=)) 
()) 
a)) 
[)) 
$num)) 
,)) 
$num)) 
])) 
+)) 
a))  
[))  !
$num))! "
,))" #
$num))$ %
]))% &
+))' (
a))) *
[))* +
$num))+ ,
,)), -
$num)). /
]))/ 0
)))0 1
%))2 3
$num))4 ;
;)); <
y** 
=** 
a** 
[** 
$num** 
,** 
$num** 
]** 
;** 
z++ 
=++ 
a++ 
[++ 
$num++ 
,++ 
$num++ 
]++ 
;++ 
for,, 
(,, 
i,, 
=,, 
$num,, 
;,, 
i,, 
<,, 
$num,,  !
;,,! "
i,,# $
++,,$ &
),,& '
{-- 
for.. 
(.. 
j.. 
=.. 
$num.. 
;.. 
j..  !
<.." #
$num..$ %
;..% &
j..' (
++..( *
)..* +
{// 
a00 
[00 
i00 
,00 
j00 
]00 
=00  !
a00" #
[00# $
i00$ %
+00& '
$num00( )
,00) *
j00+ ,
]00, -
;00- .
a11 
[11 
$num11 
,11 
$num11 
]11 
=11  !
x11" #
;11# $
a22 
[22 
$num22 
,22 
$num22 
]22 
=22  !
y22" #
;22# $
a33 
[33 
$num33 
,33 
$num33 
]33 
=33  !
z33" #
;33# $
}44 
}55 
}66 
var77 
resp77 
=77 
(77 
a77 
[77 
k77 
,77 
$num77 
]77 
+77  !
a77" #
[77# $
k77$ %
,77% &
$num77' (
]77( )
+77* +
a77, -
[77- .
k77. /
,77/ 0
$num771 2
]772 3
)773 4
%775 6
$num777 >
;77> ?
return88 
resp88 
.88 
ToString88  
(88  !
)88! "
;88" #
}99 	
}:: 
};; îX
,E:\Labs\CrossPlatform\Lab5\Lab5\Labs\Lab3.cs
	namespace 	
Lab5
 
. 
Labs 
{ 
public 

class 
Lab3 
: 
ILab 
{		 
public

 
string

 
Description

 !
{

" #
get

$ '
;

' (
set

) ,
;

, -
}

. /
public 
Lab3 
( 
) 
{ 	
Description 
= 
$str	 ∫
+
ª º
$str	 æ
;
æ ø
} 	
public 
string 
Execute 
( 
string $
input% *
)* +
{ 	
var 
lines 
= 
input 
. 
Split #
(# $
$str$ *
)* +
.+ ,
ToList, 2
(2 3
)3 4
;4 5
if 
( 
lines 
. 
Count 
< 
$num 
)  
{ 
return 
$str ,
;, -
} 
var 
sizeArr 
= 
lines 
[  
$num  !
]! "
." #
Split# (
(( )
$char) ,
), -
;- .
if 
( 
sizeArr 
. 
Length 
<  
$num! "
)" #
{ 
return 
$str 0
;0 1
} 
int 
h 
; 
int   
w   
;   
if!! 
(!! 
!!! 
int!! 
.!! 
TryParse!! 
(!! 
sizeArr!! %
[!!% &
$num!!& '
]!!' (
,!!( )
out!!* -
h!!. /
)!!/ 0
)!!0 1
{"" 
return## 
$str## ,
;##, -
}$$ 
if%% 
(%% 
!%% 
int%% 
.%% 
TryParse%% 
(%% 
sizeArr%% %
[%%% &
$num%%& '
]%%' (
,%%( )
out%%* -
w%%. /
)%%/ 0
)%%0 1
{&& 
return'' 
$str'' +
;''+ ,
}(( 
var)) 
battlefield)) 
=)) 
new)) !
BattleField))" -
())- .
h)). /
,))/ 0
w))1 2
)))2 3
;))3 4
lines** 
.** 
RemoveAt** 
(** 
$num** 
)** 
;** 
battlefield++ 
.++ 
Fill++ 
(++ 
lines++ "
)++" #
;++# $
battlefield,, 
.,, 
	FindShips,, !
(,,! "
),," #
;,,# $
return-- 
battlefield-- 
.-- 
Count-- $
(--$ %
)--% &
;--& '
}// 	
class00 
BattleField00 
{11 	
private22 
List22 
<22 
Ship22 
>22 
ships22 $
;22$ %
private33 
char33 
[33 
,33 
]33 
field33 !
;33! "
private44 
int44 
h44 
;44 
private55 
int55 
w55 
;55 
public77 
BattleField77 
(77 
int77 "
h77# $
,77$ %
int77& )
w77* +
)77+ ,
{88 
this99 
.99 
h99 
=99 
h99 
;99 
this:: 
.:: 
w:: 
=:: 
w:: 
;:: 
ships;; 
=;; 
new;; 
List;;  
<;;  !
Ship;;! %
>;;% &
(;;& '
);;' (
;;;( )
field<< 
=<< 
new<< 
char<<  
[<<  !
h<<! "
,<<" #
w<<$ %
]<<% &
;<<& '
}== 
public?? 
string?? 
Count?? 
(??  
)??  !
{@@ 
varAA 
goodAA 
=AA 
shipsAA  
.AA  !
FindAllAA! (
(AA( )
objAA) ,
=>AA- /
objAA0 3
.AA3 4
pointsAA4 :
.AA: ;
ContainsAA; C
(AAC D
$charAAD G
)AAG H
&&AAI K
!AAL M
objAAM P
.AAP Q
pointsAAQ W
.AAW X
ContainsAAX `
(AA` a
$charAAa d
)AAd e
)AAe f
.AAf g
CountAAg l
;AAl m
varBB 
killedBB 
=BB 
shipsBB "
.BB" #
FindAllBB# *
(BB* +
objBB+ .
=>BB/ 1
!BB2 3
objBB3 6
.BB6 7
pointsBB7 =
.BB= >
ContainsBB> F
(BBF G
$charBBG J
)BBJ K
&&BBL N
objBBO R
.BBR S
pointsBBS Y
.BBY Z
ContainsBBZ b
(BBb c
$charBBc f
)BBf g
)BBg h
.BBh i
CountBBi n
;BBn o
varCC 
damagedCC 
=CC 
shipsCC #
.CC# $
FindAllCC$ +
(CC+ ,
objCC, /
=>CC0 2
objCC3 6
.CC6 7
pointsCC7 =
.CC= >
ContainsCC> F
(CCF G
$charCCG J
)CCJ K
&&CCL N
objCCO R
.CCR S
pointsCCS Y
.CCY Z
ContainsCCZ b
(CCb c
$charCCc f
)CCf g
)CCg h
.CCh i
CountCCi n
;CCn o
returnDD 
$"DD 
{DD 
goodDD 
}DD  
{DD! "
damagedDD" )
}DD) *
{DD+ ,
killedDD, 2
}DD2 3
"DD3 4
;DD4 5
}EE 
publicFF 
boolFF 
FillFF 
(FF 
ListFF !
<FF! "
stringFF" (
>FF( )
linesFF* /
)FF/ 0
{GG 
forHH 
(HH 
intHH 
iHH 
=HH 
$numHH 
;HH 
iHH  !
<HH" #
hHH$ %
;HH% &
iHH' (
++HH( *
)HH* +
{II 
varJJ 
charsJJ 
=JJ 
linesJJ  %
[JJ% &
iJJ& '
]JJ' (
.JJ( )
ToCharArrayJJ) 4
(JJ4 5
)JJ5 6
;JJ6 7
ifKK 
(KK 
charsKK 
.KK 
LengthKK $
<KK% &
wKK' (
)KK( )
{LL 
returnMM 
falseMM $
;MM$ %
}NN 
forOO 
(OO 
intOO 
jOO 
=OO  
$numOO! "
;OO" #
jOO$ %
<OO& '
wOO( )
;OO) *
jOO+ ,
++OO, .
)OO. /
{PP 
fieldQQ 
[QQ 
iQQ 
,QQ  
jQQ! "
]QQ" #
=QQ$ %
charsQQ& +
[QQ+ ,
jQQ, -
]QQ- .
;QQ. /
}RR 
}SS 
returnUU 
trueUU 
;UU 
}VV 
publicXX 
voidXX 
	FindShipsXX !
(XX! "
)XX" #
{YY 
intZZ 

shipsCountZZ 
=ZZ  
$numZZ! "
;ZZ" #
for[[ 
([[ 
int[[ 
i[[ 
=[[ 
$num[[ 
;[[ 
i[[  !
<[[" #
h[[$ %
;[[% &
i[[' (
++[[( *
)[[* +
{\\ 
for]] 
(]] 
int]] 
j]] 
=]]  
$num]]! "
;]]" #
j]]$ %
<]]& '
w]]( )
;]]) *
j]]+ ,
++]], .
)]]. /
{^^ 
if__ 
(__ 
field__ !
[__! "
i__" #
,__# $
j__% &
]__& '
!=__( *
$char__+ .
)__. /
{`` 
Shipaa  
shipaa! %
=aa& '
newaa( +
Shipaa, 0
(aa0 1
)aa1 2
;aa2 3

shipsCountbb &
++bb& (
;bb( )
Reccc 
(cc  
icc  !
,cc! "
jcc# $
,cc$ %
refcc& )
shipcc* .
)cc. /
;cc/ 0
shipsdd !
.dd! "
Adddd" %
(dd% &
shipdd& *
)dd* +
;dd+ ,
}ee 
}ff 
}gg 
}ii 
privatekk 
voidkk 
Reckk 
(kk 
intkk  
ikk! "
,kk" #
intkk$ '
jkk( )
,kk) *
refkk+ .
Shipkk/ 3
shipkk4 8
)kk8 9
{ll 
ifmm 
(mm 
imm 
<mm 
$nummm 
||mm 
imm 
>=mm !
hmm" #
||mm$ &
jmm' (
<mm) *
$nummm+ ,
||mm- /
jmm0 1
>=mm2 4
wmm5 6
||mm7 9
fieldmm: ?
[mm? @
imm@ A
,mmA B
jmmC D
]mmD E
==mmF H
$charmmI L
)mmL M
{nn 
returnoo 
;oo 
}pp 
shipqq 
.qq 
pointsqq 
.qq 
Addqq 
(qq  
fieldqq  %
[qq% &
iqq& '
,qq' (
jqq) *
]qq* +
)qq+ ,
;qq, -
fieldrr 
[rr 
irr 
,rr 
jrr 
]rr 
=rr 
$charrr !
;rr! "
Recss 
(ss 
iss 
+ss 
$numss 
,ss 
jss 
,ss 
refss !
shipss" &
)ss& '
;ss' (
Rectt 
(tt 
itt 
-tt 
$numtt 
,tt 
jtt 
,tt 
reftt !
shiptt" &
)tt& '
;tt' (
Recuu 
(uu 
iuu 
,uu 
juu 
+uu 
$numuu 
,uu 
refuu !
shipuu" &
)uu& '
;uu' (
Recvv 
(vv 
ivv 
,vv 
jvv 
-vv 
$numvv 
,vv 
refvv !
shipvv" &
)vv& '
;vv' (
}ww 
}yy 	
class|| 
Ship|| 
{}} 	
public~~ 
List~~ 
<~~ 
char~~ 
>~~ 
points~~ $
;~~$ %
public
ÄÄ 
Ship
ÄÄ 
(
ÄÄ 
)
ÄÄ 
{
ÅÅ 
this
ÇÇ 
.
ÇÇ 
points
ÇÇ 
=
ÇÇ 
new
ÇÇ !
List
ÇÇ" &
<
ÇÇ& '
char
ÇÇ' +
>
ÇÇ+ ,
(
ÇÇ, -
)
ÇÇ- .
;
ÇÇ. /
}
ÉÉ 
}
ÑÑ 	
}
ÖÖ 
}áá Ò
1E:\Labs\CrossPlatform\Lab5\Lab5\Models\Account.cs
	namespace 	
Lab5
 
. 
Models 
{ 
public 

class 
Account 
{		 
}

 
} ˛
8E:\Labs\CrossPlatform\Lab5\Lab5\Models\ErrorViewModel.cs
	namespace 	
Lab5
 
. 
Models 
{ 
public 

class 
ErrorViewModel 
{ 
public 
string 
	RequestId 
{  !
get" %
;% &
set' *
;* +
}, -
public		 
bool		 
ShowRequestId		 !
=>		" $
!		% &
string		& ,
.		, -
IsNullOrEmpty		- :
(		: ;
	RequestId		; D
)		D E
;		E F
}

 
} …
8E:\Labs\CrossPlatform\Lab5\Lab5\Models\LoginViewModel.cs
	namespace 	
Lab5
 
. 
Models 
{ 
public		 

class		 
LoginViewModel		 
{

 
[ 	
Required	 
] 
public 
string 
UserName 
{  
get! $
;$ %
set& )
;) *
}+ ,
[ 	
Required	 
] 
[ 	
DataType	 
( 
DataType 
. 
Password #
)# $
]$ %
public 
string 
Password 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
string 
	ReturnUrl 
{  !
get" %
;% &
set' *
;* +
}, -
} 
} Ü
;E:\Labs\CrossPlatform\Lab5\Lab5\Models\RegisterViewModel.cs
	namespace 	
Lab5
 
. 
Models 
{ 
public		 

class		 
RegisterViewModel		 "
{

 
[ 	
Required	 
] 
public 
string 
UserName 
{  
get! $
;$ %
set& )
;) *
}+ ,
[ 	
Required	 
] 
[ 	
DataType	 
( 
DataType 
. 
Password #
)# $
]$ %
public 
string 
Password 
{  
get! $
;$ %
set& )
;) *
}+ ,
[ 	
Required	 
] 
public 
string 
FullName 
{  
get! $
;$ %
set& )
;) *
}+ ,
[ 	
Required	 
] 
public 
string 
PhoneNumber !
{" #
get$ '
;' (
set) ,
;, -
}. /
[ 	
Required	 
] 
public 
string 
Email 
{ 
get !
;! "
set# &
;& '
}( )
[ 	
Required	 
] 
[ 	
Compare	 
( 
$str 
) 
] 
[ 	
DataType	 
( 
DataType 
. 
Password #
)# $
]$ %
public 
string 
ConfirmPassword %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public 
string 
	ReturnUrl 
{  !
get" %
;% &
set' *
;* +
}, -
} 
} Å
*E:\Labs\CrossPlatform\Lab5\Lab5\Program.cs
	namespace 	
Lab5
 
{ 
public 

class 
Program 
{ 
public 
static 
void 
Main 
(  
string  &
[& '
]' (
args) -
)- .
{ 	
var 
host 
= 
CreateHostBuilder (
(( )
args) -
)- .
.. /
Build/ 4
(4 5
)5 6
;6 7
using 
( 
var 
scope 
= 
host #
.# $
Services$ ,
., -
CreateScope- 8
(8 9
)9 :
): ;
{ 
var 
serviceProvider #
=$ %
scope& +
.+ ,
ServiceProvider, ;
;; <
try 
{ 
var 
context 
=  !
serviceProvider" 1
.1 2
GetRequiredService2 D
<D E
AuthDbContextE R
>R S
(S T
)T U
;U V
DbInitializer !
.! "

Initialize" ,
(, -
context- 4
)4 5
;5 6
} 
catch 
( 
	Exception  
e! "
)" #
{ 
Console 
. 
	WriteLine %
(% &
e& '
)' (
;( )
throw 
; 
} 
} 
host!! 
.!! 
Run!! 
(!! 
)!! 
;!! 
}"" 	
public$$ 
static$$ 
IHostBuilder$$ "
CreateHostBuilder$$# 4
($$4 5
string$$5 ;
[$$; <
]$$< =
args$$> B
)$$B C
=>$$D F
Host%% 
.%%  
CreateDefaultBuilder%% %
(%%% &
args%%& *
)%%* +
.&& $
ConfigureWebHostDefaults&& )
(&&) *

webBuilder&&* 4
=>&&5 7
{'' 

webBuilder(( 
.(( 

UseStartup(( )
<(() *
Startup((* 1
>((1 2
(((2 3
)((3 4
;((4 5
})) 
))) 
;)) 
}** 
}++ é6
*E:\Labs\CrossPlatform\Lab5\Lab5\Startup.cs
	namespace 	
Lab5
 
{ 
public 

class 
Startup 
{ 
public 
Startup 
( 
IConfiguration %
configuration& 3
)3 4
{ 	
Configuration 
= 
configuration )
;) *
} 	
public 
IConfiguration 
Configuration +
{, -
get. 1
;1 2
}3 4
public 
void 
ConfigureServices %
(% &
IServiceCollection& 8
services9 A
)A B
{ 	
var 
connectionString  
=! "
Configuration# 0
.0 1
GetValue1 9
<9 :
string: @
>@ A
(A B
$strB P
)P Q
;Q R
services 
. 
AddDbContext !
<! "
AuthDbContext" /
>/ 0
(0 1
options1 8
=>9 ;
options< C
.C D
	UseSqliteD M
(M N
connectionStringN ^
)^ _
)_ `
;` a
services   
.   
AddIdentity    
<    !
AppUser  ! (
,  ( )
IdentityRole  * 6
>  6 7
(  7 8
config  8 >
=>  ? A
{!! 
config"" 
."" 
Password"" 
.""  
RequiredLength""  .
=""/ 0
$num""1 2
;""2 3
config## 
.## 
Password## 
.##  
RequireDigit##  ,
=##- .
false##/ 4
;##4 5
config$$ 
.$$ 
Password$$ 
.$$  "
RequireNonAlphanumeric$$  6
=$$7 8
false$$9 >
;$$> ?
config%% 
.%% 
Password%% 
.%%  
RequireUppercase%%  0
=%%1 2
false%%3 8
;%%8 9
}&& 
)&& 
.'' $
AddEntityFrameworkStores'' )
<'') *
AuthDbContext''* 7
>''7 8
(''8 9
)''9 :
.(( $
AddDefaultTokenProviders(( )
((() *
)((* +
;((+ ,
services** 
.** &
ConfigureApplicationCookie** /
(**/ 0
config**0 6
=>**7 9
{++ 
config,, 
.,, 
Cookie,, 
.,, 
Name,, "
=,,# $
$str,,% =
;,,= >
config-- 
.-- 
Cookie-- 
.-- 
HttpOnly-- &
=--' (
true--) -
;--- .
config.. 
... 
Cookie.. 
... 
SameSite.. &
=..' (
SameSiteMode..) 5
...5 6
None..6 :
;..: ;
config// 
.// 
Cookie// 
.// 
SecurePolicy// *
=//+ ,
CookieSecurePolicy//- ?
.//? @
Always//@ F
;//F G
config00 
.00 
ExpireTimeSpan00 %
=00& '
TimeSpan00( 0
.000 1
	FromHours001 :
(00: ;
$num00; <
)00< =
;00= >
config11 
.11 
	LoginPath11  
=11! "
$str11# 0
;110 1
config22 
.22 

LogoutPath22 !
=22" #
$str22$ 2
;222 3
}33 
)33 
;33 
services55 
.55 #
AddControllersWithViews55 ,
(55, -
)55- .
;55. /
services77 
.77 
AddAuthentication77 &
(77& '(
CookieAuthenticationDefaults77' C
.77C D 
AuthenticationScheme77D X
)77X Y
.77Y Z
	AddCookie77Z c
(77c d
builder77d k
=>77l n
{88 
builder99 
.99 
Cookie99 
.99 
Name99 #
=99$ %
$str99& >
;99> ?
builder:: 
.:: 
ClaimsIssuer:: $
=::% &
$str::' 3
;::3 4
};; 
);; 
;;; 
services<< 
.<< 
AddIdentityServer<< &
(<<& '
)<<' (
.== 
AddAspNetIdentity== "
<==" #
AppUser==# *
>==* +
(==+ ,
)==, -
.>> #
AddInMemoryApiResources>> (
(>>( )
IdConfiguration>>) 8
.>>8 9
ApiResources>>9 E
)>>E F
.?? (
AddInMemoryIdentityResources?? -
(??- .
IdConfiguration??. =
.??= >
IdentityResources??> O
)??O P
.@@  
AddInMemoryApiScopes@@ %
(@@% &
IdConfiguration@@& 5
.@@5 6
	ApiScopes@@6 ?
)@@? @
.AA 
AddInMemoryClientsAA #
(AA# $
IdConfigurationAA$ 3
.AA3 4
ClientsAA4 ;
)AA; <
.BB )
AddDeveloperSigningCredentialBB .
(BB. /
)BB/ 0
;BB0 1
}CC 	
publicFF 
voidFF 
	ConfigureFF 
(FF 
IApplicationBuilderFF 1
appFF2 5
,FF5 6
IWebHostEnvironmentFF7 J
envFFK N
)FFN O
{GG 	
ifHH 
(HH 
envHH 
.HH 
IsDevelopmentHH !
(HH! "
)HH" #
)HH# $
{II 
appJJ 
.JJ %
UseDeveloperExceptionPageJJ -
(JJ- .
)JJ. /
;JJ/ 0
}KK 
elseLL 
{MM 
appNN 
.NN 
UseExceptionHandlerNN '
(NN' (
$strNN( 5
)NN5 6
;NN6 7
}OO 
appPP 
.PP 
UseStaticFilesPP 
(PP 
)PP  
;PP  !
appRR 
.RR 
UseIdentityServerRR !
(RR! "
)RR" #
;RR# $
appTT 
.TT 
UseAuthenticationTT !
(TT! "
)TT" #
;TT# $
appUU 
.UU 

UseRoutingUU 
(UU 
)UU 
;UU 
appWW 
.WW 
UseAuthorizationWW  
(WW  !
)WW! "
;WW" #
appYY 
.YY 
UseEndpointsYY 
(YY 
	endpointsYY &
=>YY' )
{ZZ 
	endpoints[[ 
.[[ 
MapControllerRoute[[ ,
([[, -
name\\ 
:\\ 
$str\\ #
,\\# $
pattern]] 
:]] 
$str]] E
)]]E F
;]]F G
}^^ 
)^^ 
;^^ 
}__ 	
}`` 
}aa 